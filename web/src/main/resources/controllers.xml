<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
	http://www.springframework.org/schema/mvc
	http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="subscriptionInfoAsm" class="mobi.nowtechnologies.server.web.asm.SubscriptionInfoAsm">
        <property name="timeService" ref="timeService"/>
        <property name="iTunesPaymentService" ref="service.iTunesPaymentService"/>
    </bean>

    <bean name="web.HomeController" class="mobi.nowtechnologies.server.web.controller.HomeController"/>

    <bean name="web.LoginController" class="mobi.nowtechnologies.server.web.controller.LoginLogoutController"/>

    <bean name="web.AccountController" class="mobi.nowtechnologies.server.web.controller.AccountController">
        <property name="userRepository" ref="userRepository"/>
        <property name="userService" ref="service.UserService"/>
        <property name="messageSource" ref="messageSource"/>
        <property name="specificCommunityResourcesFolderPath" value="${specificCommunityResourcesFolderPath}"/>
    </bean>

    <bean class="mobi.nowtechnologies.server.web.controller.PaymentsController">
        <property name="paymentDetailsService" ref="service.PaymentDetailsService"/>
        <property name="userRepository" ref="userRepository"/>
        <property name="paymentDetailsRepository" ref="paymentDetailsRepository"/>
    	<property name="promotionService" ref="service.PromotionService"/>
        <property name="paymentPolicyService" ref="service.PaymentPolicyService"/>
        <property name="communityResourceBundleMessageSource" ref="serviceMessageSource"/>
        <property name="subscriptionInfoAsm" ref="subscriptionInfoAsm"/>
    </bean>

    <bean class="mobi.nowtechnologies.server.web.controller.PaymentsCreditCardController">
        <property name="countryService" ref="service.CountryService"/>
        <property name="paymentDetailsService" ref="service.PaymentDetailsService"/>
        <property name="paymentPolicyService" ref="service.PaymentPolicyService"/>
    </bean>

    <bean class="mobi.nowtechnologies.server.web.controller.PaymentsPayPalController">
        <property name="paymentDetailsService" ref="service.PaymentDetailsService"/>
        <property name="paymentPolicyService" ref="service.PaymentPolicyService"/>
        <property name="userService" ref="service.UserService"/>
        <property name="userRepository" ref="userRepository"/>
        <property name="communityResourceBundleMessageSource" ref="serviceMessageSource"/>
    </bean>

    <bean class="mobi.nowtechnologies.server.web.controller.PaymentsMigController">
        <property name="paymentDetailsService" ref="service.PaymentDetailsService"/>
        <property name="paymentPolicyService" ref="service.PaymentPolicyService"/>
    </bean>

	<bean class="mobi.nowtechnologies.server.web.controller.PaymentsPsmsController">
        <property name="paymentDetailsService" ref="service.PaymentDetailsService"/>
        <property name="paymentPolicyRepository" ref="paymentPolicyRepository"/>
        <property name="o2PaymentService" ref="service.o2PaymentService"/>
        <property name="vfPaymentService" ref="service.vfPaymentService"/>
        <property name="userRepository" ref="userRepository"/>
    </bean>


    <bean class="mobi.nowtechnologies.server.web.controller.UnsubscribeController">
        <property name="userService" ref="service.UserService"/>
    </bean>

    <bean class="mobi.nowtechnologies.server.web.controller.PlaylistController">
        <property name="chartService" ref="service.ChartService"/>
        <property name="userService" ref="service.UserService"/>
        <property name="userRepository" ref="userRepository"/>
        <property name="chartDetailService" ref="service.ChartDetailService"/>
        <property name="env">
            <util:map key-type="java.lang.String" value-type="java.lang.String">
                <entry key="#{T(mobi.nowtechnologies.server.web.controller.PlaylistController).URL_TO_CHART_COVER}" value="${cloudFile.filesURL}"/>
                <entry key="#{T(mobi.nowtechnologies.server.web.controller.PlaylistController).URL_TO_TRACKS}" value="${cloudFile.mediaCoverFileURL}"/>
            </util:map>
        </property>
    </bean>

    <bean class="mobi.nowtechnologies.server.web.controller.TermsController"/>

    <bean name="web.ErrorController" class="mobi.nowtechnologies.server.web.controller.ErrorController"/>
    
    <bean class="mobi.nowtechnologies.server.web.controller.VideoTrialController">
        <property name="userService" ref="service.UserService"/>
        <property name="userRepository" ref="userRepository"/>
    </bean>

    <bean class="mobi.nowtechnologies.server.support.props.PropController"/>

    <!-- Static Pages -->
    <mvc:view-controller path="/privacy_policy.html" view-name="privacy_policy"/>
    <mvc:resources mapping="/MANIFEST.MF" location="classpath:version/MANIFEST.MF" />
</beans>
