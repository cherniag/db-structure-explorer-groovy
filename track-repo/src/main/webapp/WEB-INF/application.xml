<?xml version="1.0" encoding="UTF-8"?>
<beans
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:util="http://www.springframework.org/schema/util"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="log4jInitialization" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
        <property name="targetClass" value="org.springframework.util.Log4jConfigurer" />
        <property name="targetMethod" value="initLogging" />
        <property name="arguments">
            <list>
                <value>${trackrepo.log.configLocation}</value>
                <value>${trackrepo.log.refreshInterval}</value>
            </list>
        </property>
    </bean>

    <bean id="applicationProperties" class="mobi.nowtechnologies.server.trackrepo.ApplicationProperties">
		<property name="binZip" value="${trackRepo.binZip}" />
	</bean>

	<import resource="classpath:META-INF/shared.xml" />
	
	<import resource="trackrepo-dao.xml" />
	
	<import resource="trackrepo-services.xml" />
	
	<import resource="security.xml" />

    <util:list id="appPropertiesLocations" value-type="org.springframework.core.io.Resource">
        <value>classpath:application.properties</value>
        <value>classpath:trackrepo-application.properties</value>
        <value>file:#{systemProperties['catalina.base']}/conf/application.properties</value>
        <value>file:#{systemProperties['catalina.base']}/conf/trackrepo-application.properties</value>
        <value>file:#{systemProperties['catalina.base']}/conf/#{systemProperties['env']}/application.properties</value>
        <value>file:#{systemProperties['catalina.base']}/conf/#{systemProperties['env']}/trackrepo-application.properties</value>
    </util:list>
</beans>