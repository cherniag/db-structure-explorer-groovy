<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <bean id="vf_nz.service.SMPPService" class="mobi.nowtechnologies.server.service.sms.SMPPServiceImpl">
        <property name="useQueueManager" value="${vf.nz.smpp.service.useQueue}" />
        <property name="gatewaysConfiguration">
            <set>
                <bean class="com.sentaca.spring.smpp.SMSCGatewayConfiguration">
                    <constructor-arg>
                        <bean class="mobi.nowtechnologies.server.service.sms.SMPPBindConfiguration">
                            <property name="systemId" value="${vf.nz.smpp.service.systemId}" />
                            <property name="password" value="${vf.nz.smpp.service.password}" />
                            <property name="host" value="${vf.nz.smpp.service.host}" />
                            <property name="port" value="${vf.nz.smpp.service.port}" />
                            <property name="sourceTON" value="${vf.nz.smpp.service.sourceTON}" />
                            <property name="sourceNPI" value="${vf.nz.smpp.service.sourceNPI}" />
                            <property name="destinationTON" value="${vf.nz.smpp.service.destinationTON}" />
                            <property name="destinationNPI" value="${vf.nz.smpp.service.destinationNPI}" />
                            <property name="systemType" value="${vf.nz.smpp.service.systemType}" />
                            <property name="serviceType" value="${vf.nz.smpp.service.serviceType}" />
                            <property name="connectionPoolSize" value="${vf.nz.smpp.service.pool.size}" />
                        </bean>
                    </constructor-arg>
                    <constructor-arg>
                        <bean class="mobi.nowtechnologies.server.service.sms.SMPPMessageReceiver">
                            <constructor-arg>
                                <!-- inject your handler here -->
                                <ref bean="vf_nz.service.SMPPProcessorContainer"/>
                            </constructor-arg>
                        </bean>
                    </constructor-arg>
                </bean>
            </set>
        </property>
    </bean>

    <bean id="vf_nz.service.SMPPProcessorContainer" class="mobi.nowtechnologies.server.service.sms.SMSMessageProcessorContainer">
        <property name="messageProcessors">
            <list>
                <ref bean="mtvnzPaymentSMSMessageProcessor"/>
                <ref bean="vf_nz.service.VFNZUnsubscribeProccessor"/>
                <ref bean="vf_nz.service.UserDetailsUpdater"/>
                <ref bean="service.vfPaymentService"/>
            </list>
        </property>
    </bean>

    <bean id="vf_nz.service.VFNZSMSGatewayService" class="mobi.nowtechnologies.server.service.vodafone.impl.VFNZSMSGatewayServiceImpl">
        <property name="smppService" ref="vf_nz.service.SMPPService"/>
    </bean>
</beans>