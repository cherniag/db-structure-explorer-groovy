<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd"
       profile="application-tests">

    <bean id="service.migHttpService" class="mobi.nowtechnologies.server.service.payment.http.MigHttpService">
        <property name="freeSMSURL" value="${mig.freeSMSURL}" />
        <property name="premiumSMSURL" value="${mig.premiumSMSURL}" />
        <property name="postService">
            <bean class="mobi.nowtechnologies.server.apptests.sms.MigPostService" />
        </property>
        <property name="request">
            <bean class="mobi.nowtechnologies.server.service.payment.request.MigRequest" />
        </property>
        <property name="timeToLiveMin" value="${mig.timeToLiveMin}" />
    </bean>

    <bean id="mailModelSerializer" class="mobi.nowtechnologies.server.apptests.email.MailModelSerializer" />
    <bean id="service.MailService" class="mobi.nowtechnologies.server.apptests.email.DbMailService" />


    <bean id="service.ITunesClient" class="mobi.nowtechnologies.server.service.itunes.impl.ITunesClientImpl">
        <property name="httpOkCode" value="#{T(org.springframework.http.HttpStatus).OK.value()}"/>
        <property name="postService">
            <bean class="mobi.nowtechnologies.server.apptests.ITunesPostService"/>
        </property>
        <property name="iTunesResponseParser" ref="iTunesResponseParser"/>
     </bean>

    <bean id="service.ITunesService" class="mobi.nowtechnologies.server.service.itunes.impl.ITunesService">
        <property name="iTunesClient" ref="service.ITunesClient"/>
        <property name="iTunesPaymentService" ref="service.iTunesPaymentService"/>
        <property name="messageSource" ref="serviceMessageSource"/>
        <property name="eventLoggerService" ref="eventLoggerService"/>
    </bean>

    <bean id="appStoreReceiptParser" class="mobi.nowtechnologies.server.apptests.AppStoreReceiptParserMock"/>
</beans>